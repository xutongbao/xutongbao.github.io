(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-634b7932"],{c977:function(e,t,o){"use strict";var a=o("4360");t["a"]=()=>{let e;const t=(t=0)=>{e=setTimeout(()=>{a["a"].commit({type:"setLightState",key:"isLoading",value:!0})},t)},o=()=>{clearTimeout(e),a["a"].commit({type:"setLightState",key:"isLoading",value:!1})};return{showLoading:t,hideLoading:o}}},ec63:function(e,t,o){"use strict";var a=o("7a23");function c(e,t,o,c,n,l){return Object(a["openBlock"])(),Object(a["createBlock"])("span",{class:`icon iconfont icon-${o.name} ${o.className}`,onClick:t[1]||(t[1]=(...e)=>c.handleClick&&c.handleClick(...e))},null,2)}var n={props:{name:{type:String,default:""},className:{type:String,default:""}},emits:["onClick"],setup(e,{emit:t}){const o=()=>{t("onClick")};return{handleClick:o}}};n.render=c;t["a"]=n},effe:function(e,t,o){"use strict";o.r(t);var a=o("7a23");function c(e,t,o,c,n,l){const d=Object(a["resolveComponent"])("Header"),i=Object(a["resolveComponent"])("Content");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(d),Object(a["createVNode"])(i)],64)}var n=o("6c02");const l={class:"m-detail-header"},d={class:"m-detail-header-title"};function i(e,t,o,c,n,i){const s=Object(a["resolveComponent"])("Icon");return Object(a["openBlock"])(),Object(a["createBlock"])("div",l,[Object(a["createVNode"])(s,{name:"back",className:"m-detail-header-back-icon",onOnClick:c.handleBack},null,8,["onOnClick"]),Object(a["createVNode"])("span",d,Object(a["toDisplayString"])(c.detailBook.title),1)])}var s=o("ec63"),r=o("5502"),u={components:{Icon:s["a"]},setup(){const e=Object(r["b"])(),t=Object(n["d"])(),o=Object(a["computed"])(()=>e.state.light.detailBook),c=()=>{t.go(-1)};return{handleBack:c,detailBook:o}}};u.render=i;var b=u;const k={class:"m-detail-row"},p={class:"m-detail-info"},h=Object(a["createVNode"])("span",{class:"m-detail-role-lable"},"主角:",-1),m={class:"m-book-price"},O={class:"m-detail-summary"};function j(e,t,o,c,n,l){return Object(a["openBlock"])(),Object(a["createBlock"])("div",null,[Object(a["createVNode"])("div",k,[Object(a["createVNode"])("img",{alt:c.detailBook.title,src:c.detailBook.avatar,class:"m-detail-img"},null,8,["alt","src"]),Object(a["createVNode"])("div",p,[Object(a["createVNode"])("div",null,[h,(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(c.detailBook.roles,(e,t)=>(Object(a["openBlock"])(),Object(a["createBlock"])("span",{key:t,class:"m-detail-role"},Object(a["toDisplayString"])(e),1))),128))]),Object(a["createVNode"])("div",m,"￥"+Object(a["toDisplayString"])(c.detailBook.price),1),Object(a["createVNode"])("div",null,[Object(a["createVNode"])("button",{class:"m-btn",onClick:t[1]||(t[1]=(...e)=>c.handleSub&&c.handleSub(...e))},"-"),Object(a["createVNode"])("input",{class:"m-add-input",value:c.detailBook.count,onInput:t[2]||(t[2]=(...e)=>c.handleInput&&c.handleInput(...e))},null,40,["value"]),Object(a["createVNode"])("button",{class:"m-btn",onClick:t[3]||(t[3]=(...e)=>c.handleAdd&&c.handleAdd(...e))},"+"),Object(a["createVNode"])("button",{class:"m-btn",onClick:t[4]||(t[4]=(...e)=>c.handleAddBook&&c.handleAddBook(...e))},"添加")])])]),Object(a["createVNode"])("div",O,Object(a["toDisplayString"])(c.detailBook.summary),1)])}var B=o("c977"),g=()=>{const e=Object(r["b"])(),t=Object(n["d"])(),o=()=>{const t=e.state.light.detailBook;t.count>1&&(t.count--,e.commit({type:"setLightState",key:"detailBook",value:t}))},a=()=>{const t=e.state.light.detailBook;t.count++,e.commit({type:"setLightState",key:"detailBook",value:t})},c=t=>{const o=e.state.light.detailBook;o.count=t.target.value.replace(/[^\d]/g,""),""!==o.count&&(o.count=parseInt(o.count)),e.commit({type:"setLightState",key:"detailBook",value:{...o}})},l=async()=>{const o=e.state.light.detailBook,{showLoading:a,hideLoading:c}=Object(B["a"])();""!==o.count&&(a(),e.dispatch({type:"addMyBooks",book:o}).then(()=>{c(),t.push("/light/index/my_books")}))};return{handleSub:o,handleAdd:a,handleInput:c,handleAddBook:l}},v={setup(){const e=Object(r["b"])(),t=Object(a["computed"])(()=>e.state.light.detailBook),{handleSub:o,handleAdd:c,handleInput:n,handleAddBook:l}=g();return{detailBook:t,handleSub:o,handleAdd:c,handleInput:n,handleAddBook:l}}};v.render=j;var y=v,N={components:{Header:b,Content:y},setup(){const e=Object(n["c"])(),t=Object(r["b"])();Object(a["onMounted"])(()=>{const{id:o}=e.params,{showLoading:a,hideLoading:c}=Object(B["a"])();a(0),t.dispatch({type:"getDetail",id:o}).then(()=>{c()})})}};N.render=c;t["default"]=N}}]);
//# sourceMappingURL=chunk-634b7932.3f9f68d4.js.map