{"version":3,"sources":["webpack:///./src/utils/useTools.js","webpack:///./src/views/light/index/home/Home.vue","webpack:///./src/views/light/index/home/Sidebar.vue","webpack:///./src/views/light/index/home/SidebarItem.vue","webpack:///./src/views/light/index/home/SidebarItem.vue?85ba","webpack:///./src/views/light/index/home/Sidebar.vue?8652","webpack:///./src/views/light/index/home/List.vue","webpack:///./src/views/light/index/home/Category.vue","webpack:///./src/views/light/index/home/CategoryItem.vue","webpack:///./src/components/light/Stars.vue","webpack:///./src/components/light/Stars.vue?42f0","webpack:///./src/views/light/index/home/CategoryItem.vue?ddf8","webpack:///./src/views/light/index/home/Category.vue?555b","webpack:///./src/views/light/index/home/useListScroll.js","webpack:///./src/views/light/index/home/useAddBook.js","webpack:///./src/components/light/Dialog.vue","webpack:///./src/components/light/Dialog.vue?d64f","webpack:///./src/views/light/index/home/List.vue?17ea","webpack:///./src/views/light/index/home/Home.vue?ab02","webpack:///./src/components/light/Icon.vue","webpack:///./src/components/light/Icon.vue?a80c"],"names":["timer","showLoading","delay","setTimeout","store","commit","type","key","value","hideLoading","clearTimeout","class","list","sidebarItem","id","currentId","handleNav","title","props","Object","state","light","el","document","getElementById","scrollIntoView","block","behavior","render","components","SidebarItem","handleScroll","category","handleTopArr","to","visible","isListDialogVisible","handleClose","handleOk","content","handleSubCount","addBook","count","handleInputCount","handleAddCount","book","alt","src","avatar","lazy","handleImageClick","placeholder","number","stars","price","handleShowDialog","n","name","className","Number","default","Icon","Stars","router","push","CategoryItem","emits","emit","topArr","getElementsByClassName","map","item","offsetTop","Infinity","useStore","e","isRealScroll","scrollTop","target","index","findIndex","top","arr","async","useTools","dispatch","then","replace","parseInt","Boolean","String","Category","Dialog","useListScroll","useAddBook","Sidebar","List","handleClick"],"mappings":"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","file":"js/chunk-97519f2e.378c40df.js","sourcesContent":["import store from '../store'\r\n\r\nexport default () => {\r\n  let timer\r\n\r\n  const showLoading = (delay = 0) => {\r\n    timer = setTimeout(() => {\r\n      store.commit({ type: 'setLightState', key: 'isLoading', value: true })\r\n    }, delay)\r\n  }\r\n\r\n  const hideLoading = () => {\r\n    clearTimeout(timer)\r\n    store.commit({ type: 'setLightState', key: 'isLoading', value: false })\r\n  }\r\n\r\n  return {\r\n    showLoading,\r\n    hideLoading,\r\n  }\r\n}","<template>\r\n  <div class=\"m-main m-home\">\r\n    <Sidebar></Sidebar>\r\n    <List></List>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted } from \"vue\"\r\nimport { useStore } from \"vuex\"\r\nimport Sidebar from \"./Sidebar\"\r\nimport List from \"./List\"\r\nimport useTools from '../../../../utils/useTools'\r\n\r\nexport default {\r\n  components: {\r\n    Sidebar,\r\n    List,\r\n  },\r\n  setup() {\r\n    const store = useStore()\r\n    const { showLoading, hideLoading } = useTools()\r\n    onMounted(() => {\r\n      showLoading()\r\n      store.dispatch({ type: \"getLightList\" }).then(() => {\r\n        hideLoading()\r\n      })\r\n    })\r\n  },\r\n}\r\n</script>\r\n\r\n<style></style>\r\n","<template>\r\n  <div class=\"m-sidebar\">\r\n    <SidebarItem\r\n      v-for=\"sidebarItem in list\"\r\n      :key=\"sidebarItem.id\"\r\n      :sidebarItem=\"sidebarItem\"\r\n    >\r\n    </SidebarItem>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useStore } from \"vuex\"\r\nimport { computed } from 'vue'\r\nimport SidebarItem from \"./SidebarItem\"\r\n\r\nexport default {\r\n  components: {\r\n    SidebarItem,\r\n  },\r\n  setup() {\r\n    const store = useStore()\r\n    const list = computed(() => store.state.light.list)\r\n    \r\n    return {\r\n      list,\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style></style>\r\n","<template>\r\n  <div\r\n    :class=\"`m-sidebar-item ${currentId === sidebarItem.id ? 'active' : ''}`\"\r\n    @click=\"handleNav(sidebarItem.id)\"\r\n  >\r\n    {{ sidebarItem.title }}\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from \"vue\"\r\nimport { useStore } from \"vuex\"\r\n\r\nexport default {\r\n  props: {\r\n    sidebarItem: {\r\n      type: Object\r\n    }\r\n  },\r\n  setup() {\r\n    const store = useStore()\r\n    const currentId = computed(() => store.state.light.currentId)\r\n\r\n    const handleNav = (id) => {\r\n      let el = document.getElementById(id)\r\n      el.scrollIntoView({ block: 'start', behavior: 'smooth' })\r\n      store.commit({ type: \"setLightState\", key: \"currentId\", value: id })\r\n      store.commit({ type: 'setLightState', key: 'isRealScroll', value: false })\r\n    }\r\n\r\n    return {\r\n      currentId,\r\n      handleNav,\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style></style>\r\n","import { render } from \"./SidebarItem.vue?vue&type=template&id=59c98d1e\"\nimport script from \"./SidebarItem.vue?vue&type=script&lang=js\"\nexport * from \"./SidebarItem.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Sidebar.vue?vue&type=template&id=896d7c0e\"\nimport script from \"./Sidebar.vue?vue&type=script&lang=js\"\nexport * from \"./Sidebar.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n  <div class=\"m-list\" @scroll=\"handleScroll\">\r\n    <Category\r\n      v-for=\"category in list\"\r\n      :key=\"category.id\"\r\n      :category=\"category\"\r\n      @onTopArr=\"handleTopArr\"\r\n    ></Category>\r\n    <Teleport to=\"body\">\r\n      <Dialog\r\n        :visible=\"isListDialogVisible\"\r\n        title=\"添加\"\r\n        @onClose=\"handleClose\"\r\n        @onOk=\"handleOk\"\r\n      >\r\n        <template #content>\r\n          <div class=\"m-add-wrap\">\r\n            <div class=\"m-add\">\r\n              <button class=\"m-btn\" @click=\"handleSubCount\">-</button>\r\n              <input\r\n                type=\"text\"\r\n                class=\"m-add-input\"\r\n                :value=\"addBook.count\"\r\n                @input=\"handleInputCount\"\r\n              />\r\n              <button class=\"m-btn\" @click=\"handleAddCount\">+</button>\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </Dialog>\r\n    </Teleport>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from \"vue\"\r\nimport { useStore } from \"vuex\"\r\nimport Category from \"./Category\"\r\nimport useListScroll from \"./useListScroll\"\r\nimport useAddBook from \"./useAddBook\"\r\nimport Dialog from \"@/components/light/Dialog\"\r\n\r\nexport default {\r\n  components: {\r\n    Category,\r\n    Dialog,\r\n  },\r\n  setup() {\r\n    const store = useStore()\r\n    const list = computed(() => store.state.light.list)\r\n    const currentId = computed(() => store.state.light.currentId)\r\n    const addBook = computed(() => store.state.light.addBook)\r\n    const isListDialogVisible = computed(\r\n      () => store.state.light.isListDialogVisible\r\n    )\r\n    const { handleScroll, handleTopArr } = useListScroll()\r\n    const {\r\n      handleClose,\r\n      handleOk,\r\n      handleAddCount,\r\n      handleSubCount,\r\n      handleInputCount,\r\n    } = useAddBook()\r\n\r\n    return {\r\n      list,\r\n      currentId,\r\n      isListDialogVisible,\r\n      handleScroll,\r\n      handleTopArr,\r\n      handleClose,\r\n      handleOk,\r\n      addBook,\r\n      handleAddCount,\r\n      handleSubCount,\r\n      handleInputCount,\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style></style>\r\n\r\n","<template>\r\n  <div :id=\"category.id\" class=\"js-category\">\r\n    <div class=\"m-category-title\">\r\n      {{ category.title }}\r\n    </div>\r\n    <CategoryItem\r\n      v-for=\"book in category.list\"\r\n      :key=\"book.id\"\r\n      :book=\"book\"\r\n    ></CategoryItem>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted } from 'vue'\r\nimport CategoryItem from \"./CategoryItem\"\r\n\r\nexport default {\r\n  props: {\r\n    category: {\r\n      type: Object,\r\n    },\r\n  },\r\n  components: {\r\n    CategoryItem,\r\n  },\r\n  emits: ['onTopArr'],\r\n  setup(props, { emit }) {\r\n    onMounted(() => {\r\n      const topArr = [...document.getElementsByClassName('js-category')].map(item => item.offsetTop)\r\n      topArr.push(Infinity)\r\n      emit('onTopArr', topArr)\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style></style>\r\n","<template>\r\n  <div class=\"m-category-item\">\r\n    <el-image\r\n      :alt=\"book.title\"\r\n      :src=\"book.avatar\"\r\n      lazy\r\n      class=\"m-category-item-img\"\r\n      @click=\"handleImageClick(book.id)\"\r\n    >\r\n      <template #placeholder>\r\n        <div class=\"m-category-item-img-loading\"></div>\r\n      </template>\r\n    </el-image>\r\n    <div class=\"m-category-item-info\">\r\n      <div>{{ book.title }}</div>\r\n      <Stars :number=\"book.stars\" />\r\n      <div class=\"m-book-price\">￥{{book.price}}</div>\r\n      <button @click=\"handleShowDialog\">添加</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Stars from \"@/components/light/Stars\"\r\nimport { useStore } from \"vuex\"\r\nimport { useRouter } from 'vue-router'\r\n\r\nexport default {\r\n  props: {\r\n    book: {\r\n      type: Object,\r\n    },\r\n  },\r\n  components: {\r\n    Stars,\r\n  },\r\n  setup(props) {\r\n    const store = useStore()\r\n    const router = useRouter()\r\n\r\n    const handleShowDialog = () => {\r\n      store.commit({\r\n        type: \"setLightState\",\r\n        key: \"isListDialogVisible\",\r\n        value: true,\r\n      })\r\n      const book = props.book\r\n      book.count = 1\r\n      store.commit({ type: \"setLightState\", key: \"addBook\", value: book })\r\n    }\r\n\r\n    const handleImageClick = (id) => {\r\n      router.push(`/light/detail/${id}`)\r\n    }\r\n\r\n    return {\r\n      handleShowDialog,\r\n      handleImageClick,\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style></style>\r\n","<template>\r\n  <div>\r\n    <Icon\r\n      v-for=\"n in 5\"\r\n      :key=\"n\"\r\n      name=\"star\"\r\n      :className=\"`m-star ${n <= number ? 'active' : ''}`\"\r\n    ></Icon>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Icon from \"./Icon\"\r\n\r\nexport default {\r\n  props: {\r\n    number: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n  },\r\n  components: {\r\n    Icon,\r\n  },\r\n}\r\n</script>\r\n\r\n<style></style>\r\n","import { render } from \"./Stars.vue?vue&type=template&id=3c247f18\"\nimport script from \"./Stars.vue?vue&type=script&lang=js\"\nexport * from \"./Stars.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./CategoryItem.vue?vue&type=template&id=1081c88f\"\nimport script from \"./CategoryItem.vue?vue&type=script&lang=js\"\nexport * from \"./CategoryItem.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Category.vue?vue&type=template&id=6aaafe54\"\nimport script from \"./Category.vue?vue&type=script&lang=js\"\nexport * from \"./Category.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { useStore } from \"vuex\"\r\n\r\nlet topArr = []\r\nlet timer\r\nexport default () => {\r\n  const store = useStore()\r\n\r\n  const handleScroll = (e) => {\r\n    if (store.state.light.isRealScroll) {\r\n      let { scrollTop } = e.target\r\n      scrollTop += topArr[0]\r\n      const index = topArr.findIndex(\r\n        (top, index, arr) => top <= scrollTop && scrollTop < arr[index + 1]\r\n      )\r\n      if (index !== store.state.light.currentId) {\r\n        store.commit({ type: \"setLightState\", key: \"currentId\", value: index })\r\n      }\r\n    } else {\r\n      clearTimeout(timer)\r\n      timer = setTimeout(() => {\r\n        store.commit({ type: 'setLightState', key: 'isRealScroll', value: true })\r\n      }, 300)\r\n    }\r\n  }\r\n\r\n  const handleTopArr = (arr) => {\r\n    topArr = arr\r\n  }\r\n\r\n  return {\r\n    handleScroll,\r\n    handleTopArr\r\n  }\r\n}","import { useStore } from \"vuex\"\r\nimport useTools from '../../../../utils/useTools'\r\n\r\nexport default () => {\r\n  const store = useStore()\r\n\r\n  const handleClose = () => {\r\n    store.commit({\r\n      type: \"setLightState\",\r\n      key: \"isListDialogVisible\",\r\n      value: false,\r\n    })\r\n  }\r\n\r\n  const handleOk = async () => {\r\n    const addBook = store.state.light.addBook\r\n    const { showLoading, hideLoading  } = useTools()\r\n    if (addBook.count !== '') {\r\n      showLoading()\r\n      store.dispatch({ type: 'addMyBooks' , book: addBook }).then(() => {\r\n        handleClose()\r\n        hideLoading()\r\n      })\r\n    }\r\n  }\r\n\r\n  const handleAddCount = () => {\r\n    const addBook = store.state.light.addBook\r\n    addBook.count++\r\n    store.commit({ type: \"setLightState\", key: \"addBook\", value: addBook })\r\n  }\r\n\r\n  const handleSubCount = () => {\r\n    const addBook = store.state.light.addBook\r\n    if (addBook.count > 1) {\r\n      addBook.count--\r\n      store.commit({ type: \"setLightState\", key: \"addBook\", value: addBook })\r\n    }\r\n  }\r\n\r\n  const handleInputCount = (e) => {\r\n    const addBook = store.state.light.addBook\r\n    addBook.count = e.target.value.replace(/[^\\d]/g, \"\")\r\n    if (addBook.count !== '') {\r\n      addBook.count = parseInt(addBook.count)\r\n    }\r\n    store.commit({\r\n      type: \"setLightState\",\r\n      key: \"addBook\",\r\n      value: { ...addBook },\r\n    })\r\n  }\r\n\r\n  return {\r\n    handleClose,\r\n    handleOk,\r\n    handleAddCount,\r\n    handleSubCount,\r\n    handleInputCount,\r\n  }\r\n}\r\n","<template>\r\n  <div :class=\"[`m-mask ${visible ? 'active' : ''}`]\">\r\n    <div class=\"m-dialog\">\r\n      <div class=\"m-dialog-header\">\r\n        <span class=\"m-dialog-header-title\">{{title}}</span>\r\n        <span class=\"m-dialog-header-close\" @click=\"handleClose\">X</span>\r\n      </div>\r\n      <div class=\"m-dialog-content\">\r\n        <slot name=\"content\"></slot>\r\n      </div>\r\n      <div class=\"m-dialog-footer\">\r\n        <button class=\"m-btn\" @click=\"handleClose\">取消</button>\r\n        <button class=\"m-btn\" @click=\"handleOk\">确定</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n \r\n<script>\r\n \r\nexport default {\r\n  props: {\r\n    visible: {\r\n      type: Boolean\r\n    },\r\n    title: {\r\n      type: String\r\n    }\r\n  },\r\n  emits: ['onClose', 'onOk'],\r\n  setup(props, { emit }) {\r\n \r\n    const handleClose = () => {\r\n      emit('onClose')\r\n    }\r\n \r\n    const handleOk = () => {\r\n      emit('onOk')\r\n    }\r\n \r\n    return {\r\n      handleClose,\r\n      handleOk\r\n    }\r\n  }\r\n}\r\n</script>\r\n \r\n<style>\r\n \r\n</style>","import { render } from \"./Dialog.vue?vue&type=template&id=700109d1\"\nimport script from \"./Dialog.vue?vue&type=script&lang=js\"\nexport * from \"./Dialog.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./List.vue?vue&type=template&id=6d1774b1\"\nimport script from \"./List.vue?vue&type=script&lang=js\"\nexport * from \"./List.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Home.vue?vue&type=template&id=ffe3da58\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n  <span\r\n    :class=\"`icon iconfont icon-${name} ${className}`\"\r\n    @click=\"handleClick\"\r\n  ></span>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    name: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    className: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n  },\r\n  emits: [\"onClick\"],\r\n  setup(props, { emit }) {\r\n    const handleClick = () => {\r\n      emit(\"onClick\")\r\n    }\r\n\r\n    return {\r\n      handleClick,\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style></style>\r\n","import { render } from \"./Icon.vue?vue&type=template&id=47d088d7\"\nimport script from \"./Icon.vue?vue&type=script&lang=js\"\nexport * from \"./Icon.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}