{"version":3,"sources":["webpack:///./src/utils/useTools.js","webpack:///./src/components/light/Icon.vue","webpack:///./src/components/light/Icon.vue?a80c","webpack:///./src/views/light/detail/Detail.vue","webpack:///./src/views/light/detail/Header.vue","webpack:///./src/views/light/detail/Header.vue?083a","webpack:///./src/views/light/detail/Content.vue","webpack:///./src/views/light/detail/useAddBook.js","webpack:///./src/views/light/detail/Content.vue?51c5","webpack:///./src/views/light/detail/Detail.vue?6639"],"names":["timer","showLoading","delay","setTimeout","store","commit","type","key","value","hideLoading","clearTimeout","class","name","className","handleClick","props","String","default","emits","emit","render","handleBack","detailBook","title","components","Icon","router","state","light","go","alt","src","avatar","roles","role","index","price","handleSub","count","handleInput","handleAdd","handleAddBook","summary","useStore","useRouter","e","target","replace","parseInt","async","book","useTools","dispatch","then","push","useAddBook","Header","Content","route","id","params"],"mappings":"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","file":"js/chunk-634b7932.3f9f68d4.js","sourcesContent":["import store from '../store'\r\n\r\nexport default () => {\r\n  let timer\r\n\r\n  const showLoading = (delay = 0) => {\r\n    timer = setTimeout(() => {\r\n      store.commit({ type: 'setLightState', key: 'isLoading', value: true })\r\n    }, delay)\r\n  }\r\n\r\n  const hideLoading = () => {\r\n    clearTimeout(timer)\r\n    store.commit({ type: 'setLightState', key: 'isLoading', value: false })\r\n  }\r\n\r\n  return {\r\n    showLoading,\r\n    hideLoading,\r\n  }\r\n}","<template>\r\n  <span\r\n    :class=\"`icon iconfont icon-${name} ${className}`\"\r\n    @click=\"handleClick\"\r\n  ></span>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    name: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    className: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n  },\r\n  emits: [\"onClick\"],\r\n  setup(props, { emit }) {\r\n    const handleClick = () => {\r\n      emit(\"onClick\")\r\n    }\r\n\r\n    return {\r\n      handleClick,\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style></style>\r\n","import { render } from \"./Icon.vue?vue&type=template&id=47d088d7\"\nimport script from \"./Icon.vue?vue&type=script&lang=js\"\nexport * from \"./Icon.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n  <Header></Header>\r\n  <Content></Content>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, reactive, toRefs } from \"vue\"\r\nimport { useRoute } from \"vue-router\"\r\nimport Header from \"./Header\"\r\nimport Content from './Content'\r\nimport { useStore } from 'vuex'\r\nimport useTools from '../../../utils/useTools'\r\n\r\nexport default {\r\n  components: {\r\n    Header,\r\n    Content,\r\n  },\r\n  setup() {\r\n    const route = useRoute()\r\n    const store = useStore()\r\n\r\n    onMounted(() => {\r\n      const { id } = route.params\r\n      const { showLoading, hideLoading } = useTools()\r\n      showLoading(0)\r\n      store.dispatch({ type: 'getDetail', id }).then(() => {\r\n        hideLoading()\r\n      })\r\n    })\r\n  },\r\n}\r\n</script>\r\n\r\n<style></style>\r\n","<template>\r\n  <div class=\"m-detail-header\">\r\n    <Icon name=\"back\" className=\"m-detail-header-back-icon\" @onClick=\"handleBack\"></Icon>\r\n    <span class=\"m-detail-header-title\">{{detailBook.title}}</span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Icon from '@/components/light/Icon'\r\nimport { useRouter } from 'vue-router'\r\nimport { useStore } from 'vuex'\r\nimport { computed } from 'vue'\r\n\r\nexport default {\r\n  components: {\r\n    Icon\r\n  },\r\n  setup() {\r\n    const store = useStore()\r\n    const router = useRouter()\r\n    const detailBook = computed(()=> store.state.light.detailBook)\r\n\r\n    const handleBack = () => {\r\n      router.go(-1)\r\n    }\r\n\r\n\r\n    return {\r\n      handleBack,\r\n      detailBook\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import { render } from \"./Header.vue?vue&type=template&id=5708bb28\"\nimport script from \"./Header.vue?vue&type=script&lang=js\"\nexport * from \"./Header.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n  <div>\r\n    <div class=\"m-detail-row\">\r\n      <img :alt=\"detailBook.title\" :src=\"detailBook.avatar\" class=\"m-detail-img\" />\r\n      <div class=\"m-detail-info\">\r\n        <div>\r\n          <span class=\"m-detail-role-lable\">主角:</span>\r\n          <span v-for=\"(role, index) in detailBook.roles\" :key=\"index\" class=\"m-detail-role\">{{role}}</span>\r\n        </div>\r\n        <div class=\"m-book-price\">￥{{detailBook.price}}</div>\r\n        <div>\r\n          <button class=\"m-btn\" @click=\"handleSub\">-</button>\r\n          <input class=\"m-add-input\" :value=\"detailBook.count\" @input=\"handleInput\" />\r\n          <button class=\"m-btn\" @click=\"handleAdd\">+</button>\r\n          <button class=\"m-btn\" @click=\"handleAddBook\">添加</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"m-detail-summary\">\r\n      {{detailBook.summary}}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport useAddBook from './useAddBook'\r\n\r\nexport default {\r\n  setup() {\r\n    const store = useStore()\r\n    const detailBook = computed(() => store.state.light.detailBook)\r\n    const { handleSub, handleAdd, handleInput, handleAddBook } = useAddBook()\r\n\r\n    return {\r\n      detailBook,\r\n      handleSub,\r\n      handleAdd,\r\n      handleInput,\r\n      handleAddBook\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style></style>\r\n","import { useStore } from \"vuex\"\r\nimport { useRouter } from \"vue-router\"\r\nimport useTools from '../../../utils/useTools'\r\n\r\nexport default () => {\r\n  const store = useStore()\r\n  const router = useRouter()\r\n\r\n  const handleSub = () => {\r\n    const detailBook = store.state.light.detailBook\r\n    if (detailBook.count > 1) {\r\n      detailBook.count--\r\n      store.commit({\r\n        type: \"setLightState\",\r\n        key: \"detailBook\",\r\n        value: detailBook,\r\n      })\r\n    }\r\n  }\r\n\r\n  const handleAdd = () => {\r\n    const detailBook = store.state.light.detailBook\r\n    detailBook.count++\r\n    store.commit({\r\n      type: \"setLightState\",\r\n      key: \"detailBook\",\r\n      value: detailBook,\r\n    })\r\n  }\r\n\r\n  const handleInput = (e) => {\r\n    const detailBook = store.state.light.detailBook\r\n    detailBook.count = e.target.value.replace(/[^\\d]/g, \"\")\r\n    if (detailBook.count !== '') {\r\n      detailBook.count = parseInt(detailBook.count)\r\n    }\r\n    store.commit({\r\n      type: \"setLightState\",\r\n      key: \"detailBook\",\r\n      value: { ...detailBook },\r\n    })\r\n  }\r\n\r\n  const handleAddBook = async () => {\r\n    const book = store.state.light.detailBook\r\n    const { showLoading, hideLoading } = useTools()\r\n    if (book.count !== '') {\r\n      showLoading()\r\n      store.dispatch({ type: 'addMyBooks' , book }).then(() => {\r\n        hideLoading()\r\n        router.push('/light/index/my_books')\r\n      })\r\n    }\r\n  }\r\n\r\n  return {\r\n    handleSub,\r\n    handleAdd,\r\n    handleInput,\r\n    handleAddBook,\r\n  }\r\n}\r\n","import { render } from \"./Content.vue?vue&type=template&id=5f59a0ec\"\nimport script from \"./Content.vue?vue&type=script&lang=js\"\nexport * from \"./Content.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Detail.vue?vue&type=template&id=e0660d3a\"\nimport script from \"./Detail.vue?vue&type=script&lang=js\"\nexport * from \"./Detail.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}